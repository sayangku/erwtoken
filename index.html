<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EcoReward Game</title>
</head>
<body>
    <h1>EcoReward Game</h1>
    <p>Oyun bitir butonu aşağıda. Lütfen bitir butonuna tıklayın.</p>
    <button id="endGameBtn">Oyunu Bitir</button>

    <script>
        // Telegram Web App bağlanıyor
        const tg = window.Telegram.WebApp;

        // Oyunu bitir butonuna tıklanınca veriyi gönderiyoruz
        document.getElementById('endGameBtn').addEventListener('click', () => {
            const gameData = {
                "message": "Oyun Bitti!",
                "score": 100, // Örnek puan, bunu oyundaki puanla değiştirebilirsiniz
                "level": 10   // Örnek level
            };

            // Telegram'a veriyi gönder
            tg.sendData(JSON.stringify(gameData));

            // Kapanışı kontrol edelim
            tg.close();

            console.log('Veri gönderildi ve oyun kapatıldı.');
        });

        // WebSocket hatalarını yakalamak için bir hata yönetim fonksiyonu
        window.addEventListener('error', (event) => {
            console.error('Bir hata oluştu:', event.message);
        });
    </script>
</body>
</html>
