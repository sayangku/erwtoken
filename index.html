<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EcoReward Orman Oyunu</title>
</head>
<body>
    <h1>🌍 EcoReward Orman Oyunu 🌍</h1>
    <p>Oyun bitirildiğinde verileri Telegram'a gönder.</p>
    <button id="finishGameBtn">Oyunu Bitir</button>

    <script>
        // Telegram WebApp API'nin çalışıp çalışmadığını kontrol et
        if (window.Telegram.WebApp) {
            console.log("Telegram WebApp API mevcut.");
            Telegram.WebApp.ready(); // WebApp'in hazır olduğunu belirt
        } else {
            console.error("Telegram WebApp API bulunamadı.");
        }

        const finishGameBtn = document.getElementById('finishGameBtn');

        finishGameBtn.addEventListener('click', () => {
            const points = 150; // Bu veriler dinamik olabilir
            const erwTokens = 15; // Dinamik
            const level = 2; // Dinamik
            const forestSize = 5; // Dinamik

            // Gönderilecek veriler
            const data = {
                points: points,
                erwTokens: erwTokens,
                level: level,
                forestSize: forestSize
            };

            console.log("Gönderilen veri:", data); // Veriyi konsola yazdır

            // Telegram WebApp API'sini kullanarak veriyi gönder
            if (window.Telegram.WebApp) {
                Telegram.WebApp.sendData(JSON.stringify(data)); // Veriyi JSON formatında Telegram'a gönder
                console.log("Veri Telegram'a gönderildi.");
            } else {
                console.error("Telegram WebApp API bulunamadı.");
            }
        });
    </script>
</body>
</html>
