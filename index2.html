<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Music Collection</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f0f0f0;
        }
        h1 {
            color: #333;
            text-align: center;
        }
        p {
            font-family: 'Georgia', serif;
            font-size: 18px;
            color: #555;
            text-align: center;
            margin-bottom: 20px;
        }
        #linkForm {
            margin-bottom: 20px;
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            justify-content: center;
        }
        input {
            flex-grow: 1;
            padding: 10px;
            font-size: 16px;
            box-sizing: border-box;
        }
        button {
            padding: 10px 20px;
            background-color: #4CAF50;
            color: white;
            border: none;
            cursor: pointer;
            font-size: 16px;
        }
        button:hover {
            background-color: #45a049;
        }
        #linkList {
            list-style-type: none;
            padding: 0;
        }
        #linkList li {
            background-color: white;
            margin-bottom: 10px;
            padding: 10px;
            border-radius: 5px;
            display: flex;
            flex-wrap: wrap;
            justify-content: space-between;
            align-items: center;
        }
        #linkList li a {
            color: #1a0dab;
            text-decoration: none;
            font-size: 16px;
        }
        #linkList li a:hover {
            text-decoration: underline;
        }
        .deleteBtn, .editBtn {
            background-color: #f44336;
            color: white;
            border: none;
            padding: 5px 10px;
            cursor: pointer;
            margin-left: 5px;
        }
        .editBtn {
            background-color: #ffa500;
        }
        .editBtn:hover {
            background-color: #ff8c00;
        }
        .deleteBtn:hover {
            background-color: #d32f2f;
        }

        /* Video widget alanı */
        #videoPlayer {
            width: 100%;
            height: 360px;
            margin-top: 20px;
            background-color: black;
            border-radius: 10px;
            overflow: hidden;
        }

        #videoPlayer iframe {
            width: 100%;
            height: 100%;
            border: none;
        }

        /* Responsive adjustments */
        @media (max-width: 768px) {
            input {
                width: 100%;
            }
            button {
                width: 100%;
            }
            #linkList li {
                flex-direction: column;
                align-items: flex-start;
            }
            .deleteBtn, .editBtn {
                width: 100%;
                margin-top: 5px;
            }
            #videoPlayer {
                height: 240px;
            }
        }

        @media (max-width: 480px) {
            body {
                padding: 10px;
            }
            h1 {
                font-size: 24px;
            }
            input, button {
                font-size: 14px;
            }
            #videoPlayer {
                height: 200px;
            }
        }
    </style>
</head>
<body>
    <h1>My Music Collection</h1>

    <p>
        With this page, you can add your favorite music to your collection and listen to them anytime you want. 
        All you need to do is add the song's name and its YouTube link! Enjoy your playlist and expand your collection. 
        You can also edit or delete any music you’ve added whenever you like. Start exploring your music now!
    </p>

    <form id="linkForm">
        <input type="text" id="nameInput" placeholder="Song or video name" required>
        <input type="url" id="linkInput" placeholder="YouTube video link" required>
        <button type="submit">Add</button>
    </form>
    
    <ul id="linkList"></ul>

    <!-- Video oynatıcı alanı -->
    <div id="videoPlayer"></div>

    <script>
        const form = document.getElementById('linkForm');
        const nameInput = document.getElementById('nameInput');
        const linkInput = document.getElementById('linkInput');
        const list = document.getElementById('linkList');
        const videoPlayer = document.getElementById('videoPlayer');
        let editIndex = null; // Düzenlenen öğeyi izlemek için

        document.addEventListener('DOMContentLoaded', () => {
            const savedLinks = JSON.parse(localStorage.getItem('youtubeLinks')) || [];
            savedLinks.forEach(item => addLinkToList(item.name, item.link));
        });

        form.addEventListener('submit', (e) => {
            e.preventDefault();
            const name = nameInput.value.trim();
            const link = linkInput.value.trim();
            if (name && link) {
                if (editIndex === null) {
                    addLinkToList(name, link);
                    saveLink(name, link);
                } else {
                    updateLink(editIndex, name, link);
                }
                nameInput.value = '';
                linkInput.value = '';
                editIndex = null;
            }
        });

        function addLinkToList(name, link) {
            const li = document.createElement('li');
            const a = document.createElement('a');
            a.href = link;
            a.textContent = name;
            a.onclick = function(e) {
                e.preventDefault();
                playVideo(link); // Linke tıklayınca videoyu oynat
            };

            const editBtn = document.createElement('button');
            editBtn.textContent = 'Edit';
            editBtn.className = 'editBtn';
            editBtn.onclick = function() {
                nameInput.value = name;
                linkInput.value = link;
                editIndex = Array.from(list.children).indexOf(li);
            };

            const deleteBtn = document.createElement('button');
            deleteBtn.textContent = 'Delete';
            deleteBtn.className = 'deleteBtn';
            deleteBtn.onclick = function() {
                li.remove();
                removeLink(name, link);
            };

            li.appendChild(a);
            li.appendChild(editBtn);
            li.appendChild(deleteBtn);
            list.appendChild(li);
        }

        function playVideo(link) {
            let videoId = null;

            // Eğer link 'youtu.be/' içeriyorsa, videoId'yi bu formattan al
            if (link.includes('youtu.be/')) {
                videoId = link.split('youtu.be/')[1].split('?')[0];
            } 
            // Eğer link 'v=' içeriyorsa, videoId'yi bu formattan al
            else if (link.includes('v=')) {
                videoId = link.split('v=')[1].split('&')[0];
            }

            if (videoId) {
                videoPlayer.innerHTML = `<iframe src="https://www.youtube.com/embed/${videoId}" frameborder="0" allowfullscreen></iframe>`;
            } else {
                alert('Geçersiz YouTube linki');
            }
        }

        function saveLink(name, link) {
            const savedLinks = JSON.parse(localStorage.getItem('youtubeLinks')) || [];
            savedLinks.push({name, link});
            localStorage.setItem('youtubeLinks', JSON.stringify(savedLinks));
        }

        function updateLink(index, name, link) {
            const savedLinks = JSON.parse(localStorage.getItem('youtubeLinks')) || [];
            savedLinks[index] = {name, link};
            localStorage.setItem('youtubeLinks', JSON.stringify(savedLinks));
            list.innerHTML = '';
            savedLinks.forEach(item => addLinkToList(item.name, item.link));
        }

        function removeLink(name, link) {
            const savedLinks = JSON.parse(localStorage.getItem('youtubeLinks')) || [];
            const updatedLinks = savedLinks.filter(item => item.name !== name || item.link !== link);
            localStorage.setItem('youtubeLinks', JSON.stringify(updatedLinks));
        }
    </script>
</body>
</html>
